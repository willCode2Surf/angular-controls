/**
 * @license MIT http://jseppi.mit-license.org/license.html
*/
!function(e,o){"use strict";var n=o.module("ngWebControls",[]);n.run(["$templateCache",function(e){e.put("ngWebControls/templates/dropdownSelect.html",['<div class="wrap-dd-select">','<span class="selected">{{dropdownModel[labelField]}}</span>','<ul class="dropdown">','<li ng-repeat="item in dropdownSelect"',' class="dropdown-item"',' dropdown-select-item="item"',' dropdown-item-label="labelField">',"</li>","</ul>","</div>"].join("")),e.put("ngWebControls/templates/dropdownSelectItem.html",["<li ng-class=\"{divider: (dropdownSelectItem.divider && !dropdownSelectItem[dropdownItemLabel]), 'divider-label': (dropdownSelectItem.divider && dropdownSelectItem[dropdownItemLabel])}\">",'<a href="" class="dropdown-item"',' ng-if="!dropdownSelectItem.divider"',' ng-href="{{dropdownSelectItem.href}}"',' ng-click="selectItem()">',"{{dropdownSelectItem[dropdownItemLabel]}}","</a>",'<span ng-if="dropdownSelectItem.divider">',"{{dropdownSelectItem[dropdownItemLabel]}}","</span>","</li>"].join("")),e.put("ngWebControls/templates/dropdownMenu.html",['<ul class="dropdown">','<li ng-repeat="item in dropdownMenu"',' class="dropdown-item"',' dropdown-item-label="labelField"',' dropdown-menu-item="item">',"</li>","</ul>"].join("")),e.put("ngWebControls/templates/dropdownMenuItem.html",["<li ng-class=\"{divider: dropdownMenuItem.divider, 'divider-label': dropdownMenuItem.divider && dropdownMenuItem[dropdownItemLabel]}\">",'<a href="" class="dropdown-item"',' ng-if="!dropdownMenuItem.divider"',' ng-href="{{dropdownMenuItem.href}}"',' ng-click="selectItem()">',"{{dropdownMenuItem[dropdownItemLabel]}}","</a>",'<span ng-if="dropdownMenuItem.divider">',"{{dropdownMenuItem[dropdownItemLabel]}}","</span>","</li>"].join(""))}]),n.directive("dropdownSelect",["DropdownService",function(e){return{restrict:"A",replace:!0,scope:{dropdownSelect:"=",dropdownOptions:"=",dropdownModel:"=",dropdownOnchange:"&"},controller:["$scope","$element","$attrs",function(n,t,d){n.labelField=d.dropdownItemLabel||"text",n.dropdownOptions?(console.log("options available.  json object says:"),o.isString(n.dropdownOptions)&&(n.dropdownOptions=o.toJson(n.dropdownOptions))):(console.log(n),console.warn("No options provided for this object on the scope.")),e.register(t),this.select=function(e){e!==n.dropdownModel&&o.copy(e,n.dropdownModel),n.dropdownOnchange({selected:e})},t.bind("click",function(o){o.stopPropagation(),e.toggleActive(t)}),n.$on("$destroy",function(){e.unregister(t)})}],templateUrl:"ngWebControls/templates/dropdownSelect.html"}}]),n.directive("dropdownSelectItem",[function(){return{require:"^dropdownSelect",replace:!0,scope:{dropdownItemLabel:"=",dropdownSelectItem:"="},link:function(e,o,n,t){e.selectItem=function(){e.dropdownSelectItem.href||t.select(e.dropdownSelectItem)}},templateUrl:"ngWebControls/templates/dropdownSelectItem.html"}}]),n.directive("dropdownMenu",["$parse","$compile","DropdownService","$templateCache",function(e,n,t,d){return{restrict:"A",replace:!1,scope:{dropdownMenu:"=",dropdownModel:"=",dropdownOnchange:"&"},controller:["$scope","$element","$attrs",function(e,r,l){e.labelField=l.dropdownItemLabel||"text";var i=o.element(d.get("ngWebControls/templates/dropdownMenu.html"));i.data("$dropdownMenuController",this);var p=n(i)(e),c=o.element('<div class="wrap-dd-menu"></div>');r.replaceWith(c),c.append(r),c.append(p),t.register(p),this.select=function(n){n!==e.dropdownModel&&o.copy(n,e.dropdownModel),e.dropdownOnchange({selected:n})},r.bind("click",function(e){e.stopPropagation(),t.toggleActive(p)}),e.$on("$destroy",function(){t.unregister(p)})}]}}]),n.directive("dropdownMenuItem",[function(){return{require:"^dropdownMenu",replace:!0,scope:{dropdownMenuItem:"=",dropdownItemLabel:"="},link:function(e,o,n,t){e.selectItem=function(){e.dropdownMenuItem.href||t.select(e.dropdownMenuItem)}},templateUrl:"ngWebControls/templates/dropdownMenuItem.html"}}]),n.factory("DropdownService",["$document",function(e){var n=e.find("body"),t={},d=[];return n.bind("click",function(){o.forEach(d,function(e){e.removeClass("active")})}),t.register=function(e){d.push(e)},t.unregister=function(e){var o;o=d.indexOf(e),o>-1&&d.splice(o,1)},t.toggleActive=function(e){o.forEach(d,function(o){o!==e&&o.removeClass("active")}),e.toggleClass("active")},t}])}(window,window.angular);